        function hideCreateUserForm() {
            document.getElementById('createUserScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function showForgotPasswordForm() {
            hideAllScreens();
            document.getElementById('forgotPasswordScreen').classList.remove('hidden');
        }

        function hideForgotPasswordForm() {
            document.getElementById('forgotPasswordScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function showChangePasswordForm() {
            hideAllScreens();
            document.getElementById('changePasswordScreen').classList.remove('hidden');
        }

        function hideChangePasswordForm() {
            document.getElementById('changePasswordScreen').classList.add('hidden');
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function showUserDashboard() {
            hideAllScreens();
            document.getElementById('userDashboard').classList.remove('hidden');
            loadServices();
            loadProfessionals();
            setMinDate(); // Define a data mínima para o agendamento
        }

        function showAdminDashboard() {
            hideAllScreens();
            document.getElementById('adminDashboard').classList.remove('hidden');
            showAppointments(); // Mostra a tela de agendamentos por padrão
        }

        function showAppointments() {
            hideAdminContent();
            document.getElementById('adminAppointments').classList.remove('hidden');
            loadAppointments();
        }

        function showProfessionals() {
            hideAdminContent();
            document.getElementById('adminProfessionals').classList.remove('hidden');
            loadProfessionalsTable();
        }

        function showServices() {
            hideAdminContent();
            document.getElementById('adminServices').classList.remove('hidden');
            loadServicesTable();
        }

        function showClients() {
            hideAdminContent();
            document.getElementById('adminClients').classList.remove('hidden');
            loadClientFilter();
        }

        function hideAdminContent() {
            document.querySelectorAll('.admin-content').forEach(content => {
                content.classList.add('hidden');
            });
        }

        function logout() {
            hideAllScreens();
            document.getElementById('loginScreen').classList.remove('hidden');
        }

        function hideAllScreens() {
            document.querySelectorAll('.screen').forEach(screen => {
                screen.classList.add('hidden');
            });
        }

        // Função de Login
        document.getElementById('loginForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;

            showLoadingScreen();

            setTimeout(() => {
                const user = users.find(u => u.username === username && u.password === password);
                if (user) {
                    document.getElementById('loginMessage').textContent = '';
                    if (user.type === 'admin') {
                        showAdminDashboard();
                    } else {
                        showUserDashboard();
                    }
                } else {
                    document.getElementById('loginMessage').textContent = 'Usuário ou senha incorretos.';
                }
                hideLoadingScreen();
            }, 1000); // Simula um tempo de carregamento
        });

        // Função de Criação de Usuário
        document.getElementById('createUserForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const newUsername = document.getElementById('newUsername').value;
            const newPassword = document.getElementById('newPassword').value;
            const clientName = document.getElementById('clientName').value;
            const clientPhone = document.getElementById('clientPhone').value;
            const clientCPF = document.getElementById('clientCPF').value;

            if (users.some(u => u.username === newUsername)) {
                document.getElementById('createUserMessage').textContent = 'Usuário já existe.';
            } else {
                users.push({ username: newUsername, password: newPassword, type: "user", clientName, phone: clientPhone, cpf: clientCPF });
                saveData();
                document.getElementById('createUserMessage').textContent = 'Usuário criado com sucesso!';
                setTimeout(() => hideCreateUserForm(), 1500); // Esconde a tela após 1,5 segundos
            }
        });

        // Função de Recuperação de Senha
        document.getElementById('forgotPasswordForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const clientCPF = document.getElementById('forgotClientCPF').value;
            const user = users.find(u => u.cpf === clientCPF);

            if (user) {
                showChangePasswordForm();
            } else {
                document.getElementById('forgotPasswordMessage').textContent = 'CPF não encontrado.';
            }
        });

        // Função de Alteração de Senha
        document.getElementById('changePasswordForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const newPassword = document.getElementById('newPassword').value;
            const confirmNewPassword = document.getElementById('confirmNewPassword').value;

            if (newPassword !== confirmNewPassword) {
                document.getElementById('changePasswordMessage').textContent = 'As senhas não coincidem.';
                return;
            }

            const clientCPF = document.getElementById('forgotClientCPF').value;
            const user = users.find(u => u.cpf === clientCPF);

            if (user) {
                user.password = newPassword;
                saveData();
                document.getElementById('changePasswordMessage').textContent = 'Senha alterada com sucesso!';
                setTimeout(() => hideChangePasswordForm(), 1500); // Esconde a tela após 1,5 segundos
            }
        });

        // Função de Agendamento (Usuário)
        document.getElementById('appointmentForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const serviceType = document.getElementById('serviceType').value;
            const professional = document.getElementById('professional').value;
            const appointmentDate = document.getElementById('appointmentDate').value;
            const appointmentTime = document.getElementById('appointmentTime').value;

            const selectedDateTime = `${appointmentDate}T${appointmentTime}`;

            // Verifica se o horário já está ocupado
            if (appointments.some(app => app.dateTime === selectedDateTime && app.professional === professional)) {
                document.getElementById('appointmentMessage').textContent = 'Horário indisponível. Escolha outro horário ou profissional.';
                return;
            }

            const clientName = users.find(u => u.username === document.getElementById('username').value).clientName;

            appointments.push({
                clientName,
                service: serviceType,
                professional,
                dateTime: selectedDateTime
            });

            saveData();
            document.getElementById('appointmentMessage').textContent = 'Agendamento realizado com sucesso!';
        });

        // Função para carregar agendamentos (Admin)
        function loadAppointments() {
            const tbody = document.querySelector('#appointmentsTable tbody');
            tbody.innerHTML = '';
            appointments.forEach(appointment => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${appointment.clientName}</td>
                    <td>${appointment.service}</td>
                    <td>${appointment.professional}</td>
                    <td>${new Date(appointment.dateTime).toLocaleDateString()}</td>
                    <td>${new Date(appointment.dateTime).toLocaleTimeString()}</td>
                    <td><button onclick="deleteAppointment('${appointment.clientName}', '${appointment.dateTime}')">Excluir</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        // Função para filtrar agendamentos por período (Admin)
        document.getElementById('filterAppointmentsForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            const filteredAppointments = appointments.filter(app => {
                const appointmentDate = new Date(app.dateTime).toISOString().split('T')[0];
                return appointmentDate >= startDate && appointmentDate <= endDate;
            });

            const tbody = document.querySelector('#appointmentsTable tbody');
            tbody.innerHTML = '';
            filteredAppointments.forEach(appointment => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${appointment.clientName}</td>
                    <td>${appointment.service}</td>
                    <td>${appointment.professional}</td>
                    <td>${new Date(appointment.dateTime).toLocaleDateString()}</td>
                    <td>${new Date(appointment.dateTime).toLocaleTimeString()}</td>
                    <td><button onclick="deleteAppointment('${appointment.clientName}', '${appointment.dateTime}')">Excluir</button></td>
                `;
                tbody.appendChild(row);
            });
        });

        // Função para excluir agendamento (Admin)
        function deleteAppointment(clientName, dateTime) {
            if (confirm("Tem certeza que deseja excluir este agendamento?")) {
                appointments = appointments.filter(app => app.clientName !== clientName || app.dateTime !== dateTime);
                saveData();
                loadAppointments();
            }
        }

        // Função para adicionar serviço (Admin)
        document.getElementById('addServiceForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const serviceName = document.getElementById('serviceName').value;
            const serviceDescription = document.getElementById('serviceDescription').value;
            const servicePrice = document.getElementById('servicePrice').value;

            services.push({ name: serviceName, description: serviceDescription, price: servicePrice });
            saveData();
            loadServices();
            loadServicesTable();
            document.getElementById('addServiceForm').reset();
            document.getElementById('addServiceForm').insertAdjacentHTML('afterend', '<div class="success">Serviço adicionado com sucesso!</div>');
            setTimeout(() => document.querySelector('.success').remove(), 3000); // Remove a mensagem após 3 segundos
        });

        // Função para carregar serviços na tabela (Admin)
        function loadServicesTable() {
            const tbody = document.querySelector('#servicesTable tbody');
            tbody.innerHTML = '';
            services.forEach((service, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${service.name}</td>
                    <td>${service.description}</td>
                    <td>R$ ${service.price}</td>
                    <td>
                        <button onclick="editService(${index})">Editar</button>
                        <button onclick="deleteService(${index})">Excluir</button>
                    </td>
                `;
                tbody.appendChild(row);
            });
        }

        // Função para editar serviço (Admin)
        function editService(index) {
            const service = services[index];
            const newName = prompt("Novo nome do serviço:", service.name);
            const newDescription = prompt("Nova descrição:", service.description);
            const newPrice = prompt("Novo preço:", service.price);

            if (newName && newDescription && newPrice) {
                services[index] = { name: newName, description: newDescription, price: newPrice };
                saveData();
                loadServices();
                loadServicesTable();
                document.getElementById('servicesTable').insertAdjacentHTML('afterend', '<div class="success">Serviço atualizado com sucesso!</div>');
                setTimeout(() => document.querySelector('.success').remove(), 3000); // Remove a mensagem após 3 segundos
            }
        }

        // Função para excluir serviço (Admin)
        function deleteService(index) {
            if (confirm("Tem certeza que deseja excluir este serviço?")) {
                services.splice(index, 1);
                saveData();
                loadServices();
                loadServicesTable();
                document.getElementById('servicesTable').insertAdjacentHTML('afterend', '<div class="success">Serviço excluído com sucesso!</div>');
                setTimeout(() => document.querySelector('.success').remove(), 3000); // Remove a mensagem após 3 segundos
            }
        }

        // Função para adicionar funcionário (Admin)
        document.getElementById('addProfessionalForm').addEventListener('submit', function (e) {
            e.preventDefault();
            const professionalName = document.getElementById('professionalName').value;

            professionals.push(professionalName);
            saveData();
            loadProfessionals();
            loadProfessionalsTable();
            document.getElementById('addProfessionalForm').reset();
            document.getElementById('addProfessionalForm').insertAdjacentHTML('afterend', '<div class="success">Funcionário adicionado com sucesso!</div>');
            setTimeout(() => document.querySelector('.success').remove(), 3000); // Remove a mensagem após 3 segundos
        });

        // Função para carregar funcionários na tabela (Admin)
        function loadProfessionalsTable() {
            const tbody = document.querySelector('#professionalsTable tbody');
            tbody.innerHTML = '';
            professionals.forEach((professional, index) => {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${professional}</td>
                    <td><button onclick="deleteProfessional(${index})">Excluir</button></td>
                `;
                tbody.appendChild(row);
            });
        }

        // Função para excluir funcionário (Admin)
        function deleteProfessional(index) {
            if (confirm("Tem certeza que deseja excluir este funcionário?")) {
                professionals.splice(index, 1);
                saveData();
                loadProfessionals();
                loadProfessionalsTable();
                document.getElementById('professionalsTable').insertAdjacentHTML('afterend', '<div class="success">Funcionário excluído com sucesso!</div>');
                setTimeout(() => document.querySelector('.success').remove(), 3000); // Remove a mensagem após 3 segundos
            }
        }

        // Função para carregar serviços no formulário de agendamento
        function loadServices() {
            const select = document.getElementById('serviceType');
            select.innerHTML = '';
            services.forEach(service => {
                const option = document.createElement('option');
                option.value = service.name;
                option.textContent = `${service.name} - R$ ${service.price}`;
                select.appendChild(option);
            });
        }

        // Função para carregar profissionais no formulário de agendamento
        function loadProfessionals() {
            const select = document.getElementById('professional');
            select.innerHTML = '';
            professionals.forEach(professional => {
                const option = document.createElement('option');
                option.value = professional;
                option.textContent = professional;
                select.appendChild(option);
            });
        }

        // Função para carregar lista de usuários para promoção (Admin)
        function loadUserList() {
            const select = document.getElementById('userList');
            select.innerHTML = '';
            users.forEach(user => {
                if (user.type === 'user') {
                    const option = document.createElement('option');
                    option.value = user.username;
                    option.textContent = user.clientName;
                    select.appendChild(option);
                }
            });
        }

        // Função para carregar filtro de clientes (Admin)
        function loadClientFilter() {
            const select = document.getElementById('clientFilter');
            select.innerHTML = '<option value="">Selecione um cliente</option>';
            users.forEach(user => {
                if (user.type === 'user') {
                    const option = document.createElement('option');
                    option.value = user.username;
                    option.textContent = user.clientName;
                    select.appendChild(option);
                }
            });
        }

        // Função para carregar informações do cliente (Admin)
        function loadClientInfo() {
            const username = document.getElementById('clientFilter').value;
            const user = users.find(u => u.username === username);
            const tbody = document.querySelector('#clientInfoTable tbody');
            tbody.innerHTML = '';

            if (user) {
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.clientName}</td>
                    <td>${user.phone}</td>
                    <td>${user.cpf}</td>
                    <td>
                        <ul>
                            ${appointments.filter(app => app.clientName === user.clientName).map(app => `
                                <li>${app.service} - ${new Date(app.dateTime).toLocaleString()}</li>
                            `).join('')}
                        </ul>
                    </td>
                    <td><button onclick="deleteClient('${user.username}')">Excluir Cliente</button></td>
                `;
                tbody.appendChild(row);
            }
        }

        // Função para excluir cliente (Admin)
        function deleteClient(username) {
            if (confirm("Tem certeza que deseja excluir este cliente?")) {
                users = users.filter(u => u.username !== username);
                appointments = appointments.filter(app => app.clientName !== users.find(u => u.username === username)?.clientName);
                saveData();
                loadClientFilter();
                loadClientInfo();
                document.getElementById('clientInfoTable').insertAdjacentHTML('afterend', '<div class="success">Cliente excluído com sucesso!</div>');
                setTimeout(() => document.querySelector('.success').remove(), 3000); // Remove a mensagem após 3 segundos
            }
        }

        // Função para gerar horários disponíveis
        function generateAvailableTimes() {
            const times = [];
            for (let hour = 9; hour <= 21; hour++) {
                for (let minute = 0; minute < 60; minute += 30) {
                    times.push(`${String(hour).padStart(2, '0')}:${String(minute).padStart(2, '0')}`);
                }
            }
            return times;
        }

        // Função para definir a data mínima como o dia atual
        function setMinDate() {
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('appointmentDate').setAttribute('min', today);
        }

        // Atualizar horários disponíveis ao selecionar data
        document.getElementById('appointmentDate').addEventListener('change', function () {
            const date = new Date(this.value);
            const dayOfWeek = date.getDay();

            if (dayOfWeek < 3 || dayOfWeek > 6) { // 3 = quarta, 6 = sábado
                document.getElementById('appointmentMessage').textContent = 'Agendamentos só estão disponíveis de quarta a domingo.';
                document.getElementById('appointmentTime').innerHTML = '';
                return;
            }

            document.getElementById('appointmentMessage').textContent = '';
            const select = document.getElementById('appointmentTime');
            select.innerHTML = '';
            availableTimes.forEach(time => {
                const option = document.createElement('option');
                option.value = time;
                option.textContent = time;
                select.appendChild(option);
            });
        });

        // Mostrar rodapé ao rolar até o final da página
        window.addEventListener('scroll', function () {
            const footer = document.getElementById('footer');
            const whatsappButton = document.querySelector('.whatsapp-button');
            if (window.innerHeight + window.scrollY >= document.body.offsetHeight) {
                footer.classList.add('visible');
                whatsappButton.classList.add('visible');
            } else {
                footer.classList.remove('visible');
                whatsappButton.classList.remove('visible');
            }
        });

        // Função para mostrar a tela de carregamento
        function showLoadingScreen() {
            document.getElementById('loadingScreen').classList.add('visible');
        }

        // Função para esconder a tela de carregamento
        function hideLoadingScreen() {
            document.getElementById('loadingScreen').classList.remove('visible');
        }

        // Carregar dados ao iniciar
        loadServices();
        loadProfessionals();
        setMinDate();
    </script>
</body>
</html>
